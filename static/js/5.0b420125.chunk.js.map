{"version":3,"sources":["methods/ajax/index.ts","methods/constant/index.ts","assets/image/logo.svg","assets/image/no_record.svg","assets/image/play.svg","assets/image/quit.svg","components/Aside/index.tsx","redux/actions/task.ts","redux/actions/tomato.ts","components/AddTask/index.tsx","components/TaskList/index.tsx","components/Tasks/index.tsx","components/CircularProgress/index.tsx","components/AlarmClock/index.tsx","components/Statistics/chart.tsx","components/Statistics/index.tsx","components/HistoryItem/index.tsx","components/DefaultPage/index.tsx","components/HistoryList/index.tsx","components/TomatosHistory/index.tsx","components/TasksHistory/index.tsx","pages/Home/index.tsx"],"names":["axios__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","_history_index__WEBPACK_IMPORTED_MODULE_1__","_constant_index__WEBPACK_IMPORTED_MODULE_2__","ajax","axios","create","baseURL","timeout","headers","t-app-id","t-app-secret","interceptors","request","use","config","xToken","localStorage","getItem","TOMATO_ALARM_CLOCK_X_TOKEN","concat","error","Promise","reject","response","setItem","status","history","replace","d","__webpack_exports__","module","exports","p","Aside","_ref","username","logOut","navList","currentPage","upDateCurrentPage","react_default","a","createElement","className","src","logo","alt","length","map","nav","key","data-active","onClick","title","updateTask","task","type","UPDATE_TASK","addTomato","tomato","ADD_TOMATO","updateTomato","UPDATE_TOMATO","connect","dispatch","addTask","ADD_TASK","_useState","useState","_useState2","Object","slicedToArray","description","setDescription","postTode","post","then","res","data","resource","catch","console","log","suffix","icon","input","value","onChange","e","target","onKeyUp","persist","keyCode","placeholder","state","taskList","tasks","reduxUpdateTask","editStatus","setEditStatus","_useState3","_useState4","currentIndex","setCurrentIndex","_useState5","_useState6","currentValue","setCurrentValue","_useState7","_useState8","unfinishedTasks","setUnfinishedTasks","useEffect","unfinished","filter","completed","deleted","updateEditStatus","index","newEditStatus","JSON","parse","stringify","changeTask","id","params","arguments","undefined","put","es_radio","completed_at","Date","onPressEnter","defaultValue","disabled","data-edit","Boolean","preventDefault","Fragment","noRecord","Tasks","components_AddTask","components_TaskList","tomatoList","tomatos","reduxAddTomato","reduxUpdateTomato","circleLength","Math","PI","progress","setProgress","time","setTime","minutes","setMinutes","seconds","setSeconds","_useState9","_useState10","isRunning","setIsRunning","_useState11","_useState12","currentTomato","setCurrentTomato","_useState13","_useState14","visibleGiveUpModal","setVisibleGiveUpModal","_useState15","_useState16","visibleFinishedModal","setVisibleFinishedModal","_useState17","_useState18","taskDescription","setTaskDescription","_useState19","_useState20","giveUpReason","setGiveUpReason","_useState21","_useState22","stepSize","setStepSize","addZero","resetCountdown","callback","delay","savedCallback","useRef","current","setInterval","clearInterval","useInterval","floor","countdown","item","ended_at","aborted","startedAt","started_at","duration","timeNow","getTime","startCountdown","fliterUnfinished","submitTomato","parmas","classPrefix","version","baseProfile","width","height","xmlns","cx","cy","r","fill","stroke","strokeWidth","strokeLinecap","strokeDasharray","quitIcon","playIcon","totalTime","modal","okText","cancelText","visible","onOk","onCancel","AlarmClock","components_CircularProgress","StatisticsChart","dataList","currentDate","average","setAverage","growth","setGrowth","chartData","setChartData","getDatalist","date","dayjs","format","list","previousList","subtract","currentMonthDays","get","getDate","newAverage","toFixed","newGrowth","setAverageAndGrowth","newChartData","chartObj","forEach","nums","Array","from","v","i","formatChartData","formatGrowth","parseFloat","dataset","text","data-type","BizCharts","scale","alias","forceFit","padding","name","label","textStyle","crosshairs","position","style","lineWidth","size","shape","MonthPicker","TabPane","tabs","setCurrentDate","operations","moment","dateString","tabBarExtraContent","tab","chart","HistoryItem","updateMethod","setDisabled","created_at","updated_at","manually_created","DefaultPage","HistoryList","setConfig","visibleTotal","unit","visibleTotalTime","dateStr","getDay","subList","hours","ms","formatTime","subItem","components_HistoryItem","components_DefaultPage","finishedTomatos","setFinishedTomatos","abortedTomatos","setAbortedTomatos","finishedTotal","setFinishedTotal","abortedTotal","setAbortedTotal","currentKey","setCurrentKey","startValue","setStartValue","endValue","setEndValue","visibleModal","setVisibleModal","describe","setDescribe","modifyTomato","clearAddTomatoRecord","finished","formatTomatos","result","push","sortTomatos","keys","sort","b","finishedList","abortedList","classified","fontSize","color","cursor","TomatosHistory_TabPane","components_HistoryList","message","valueOf","date_picker","disabledDate","showTime","finishedTasks","setFinishedTasks","deletedTasks","setDeletedTasks","deletedTotal","setDeletedTotal","deletedList","modifyTask","TasksHistory_TabPane","initTasks","INIT_TASK_LIST","initTaskList","initTomatos","INIT_TOMATO_LIST","initTomatoList","setUsername","setCurrentPage","_ref2","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","all","sent","account","resources","t0","stop","apply","this","fetchData","components_Aside","removeItem","components_AlarmClock","components_Tasks","components_Statistics","components_TomatosHistory","TasksHistory"],"mappings":"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","file":"static/js/5.0b420125.chunk.js","sourcesContent":["import axios from 'axios';\nimport history from '../history/index';\nimport { TOMATO_ALARM_CLOCK_X_TOKEN } from '../constant/index';\n\nconst appId: string = 'XTrcPmPP6mK73ZgLHoXfnRef';\nconst appSecret: string = 'FNhsEEYYNvPK4xt5nLG9Qfv9';\n\nconst ajax = axios.create({\n  baseURL: 'https://gp-server.hunger-valley.com',\n  timeout: 2000,\n  headers: {\n    't-app-id': appId,\n    't-app-secret': appSecret\n  }\n});\n\najax.interceptors.request.use(config => {\n  const xToken = localStorage.getItem(TOMATO_ALARM_CLOCK_X_TOKEN)\n  if(xToken){\n      config.headers['Authorization'] = `Bearer ${xToken}`\n  }\n  return config;\n}, error => Promise.reject(error));\n\najax.interceptors.response.use(response => {\n  if(response.headers['x-token']){\n    localStorage.setItem(TOMATO_ALARM_CLOCK_X_TOKEN, response.headers['x-token'])\n  }\n  return response;\n}, error => {\n  if (error.response.status === 401) {\n    history.replace('/login')\n  }\n  return Promise.reject(error)\n});\n\nexport default ajax;\n","const TOMATO_ALARM_CLOCK_X_TOKEN: string = 'TOMATO_ALARM_CLOCK_X_TOKEN';\n\nexport {\n  TOMATO_ALARM_CLOCK_X_TOKEN\n}","module.exports = __webpack_public_path__ + \"static/media/logo.f4002783.svg\";","module.exports = __webpack_public_path__ + \"static/media/no_record.7b11cbdf.svg\";","module.exports = __webpack_public_path__ + \"static/media/play.f86935e7.svg\";","module.exports = __webpack_public_path__ + \"static/media/quit.1dce9373.svg\";","import React from 'react';\nimport './style.scss';\nimport logo from '../../assets/image/logo.svg';\n\ninterface IProps {\n  username: string;\n  logOut: () => void;\n  navList: any[];\n  currentPage: string;\n  upDateCurrentPage: (type: string) => void\n}\n\nconst Aside: React.FC<IProps> = ({username, logOut, navList, currentPage, upDateCurrentPage}) => {\n  const classPrefix = 'aside';\n\n  return (\n    <aside className={`${classPrefix}-aside`}>\n      <div>\n        <img src={logo} alt=\"logo\" className={`${classPrefix}-logo`}/>\n        <p className={`${classPrefix}-username`}>{username}</p>\n      </div>\n      \n      <div className={`${classPrefix}-menu`}>\n        {navList.length && (navList.map((nav: any) => (\n          <div\n            key={nav.key}\n            className={`${classPrefix}-menu_item`}\n            data-active={nav.key === currentPage}\n            onClick={() => upDateCurrentPage(nav.key)}>\n            {nav.title}\n          </div>\n        )))}\n      </div>\n      <p className={`${classPrefix}-logout`} onClick={logOut}>Log out</p>\n    </aside>\n  )\n}\n\nexport default Aside;\n","import { INIT_TASK_LIST, ADD_TASK, UPDATE_TASK } from '../constant/actionsType';\n\nconst initTaskList = (taskList: any[]) => ({ type: INIT_TASK_LIST, taskList});\nconst addTask = (task: any) => ({ type: ADD_TASK, task})\nconst updateTask = (task: any) => ({ type: UPDATE_TASK, task})\n\nexport {\n  initTaskList,\n  addTask,\n  updateTask\n}","import {\n  INIT_TOMATO_LIST,\n  ADD_TOMATO,\n  UPDATE_TOMATO\n } from '../constant/actionsType';\n\nexport const initTomatoList = (tomatoList: any[]) => ({ type: INIT_TOMATO_LIST, tomatoList});\nexport const addTomato = (tomato: any) => ({ type: ADD_TOMATO, tomato});\nexport const updateTomato = (tomato: any) => ({ type: UPDATE_TOMATO, tomato});\n\n\n","import React, { useState, KeyboardEvent } from 'react';\nimport { connect } from 'react-redux';\nimport { Icon } from 'antd';\nimport { Input } from 'antd';\nimport './style.scss';\nimport { addTask } from '../../redux/actions/index';\nimport ajax from '../../methods/ajax/index';\ninterface IProps {\n  addTask: (task: any[]) => any;\n}\nconst AddTask: React.FC<IProps> = ({addTask}) => {\n  const [description, setDescription] = useState('');\n\n  const postTode = (description: string) => {\n    ajax.post('https://gp-server.hunger-valley.com/todos', {description})\n      .then(res => {\n        addTask(res.data.resource)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n  }\n  const onKeyUp = (e: KeyboardEvent) => {\n    e.persist()\n    if (e.keyCode === 13 && description !== '') {\n      postTode(description)\n      setDescription('')\n    }\n  }\n\n  const classPrefix = 'add-task';\n  const suffix = <Icon\n    type=\"enter\"\n    className={`${classPrefix}_input-icon`}\n    onClick={() => {if (description) { postTode(description); setDescription('');}}}/>\n\n  return (\n    <div>\n      <div className={`${classPrefix}_top`}>\n        <div className={`${classPrefix}_header`}>\n          <h4 className={`${classPrefix}_title`}>添加任务</h4>\n          <Icon type=\"plus-square\" />\n        </div>\n        <Input\n          className={`${classPrefix}_input`}\n          value={description}\n          onChange={(e) => {setDescription(e.target.value)}}\n          onKeyUp={onKeyUp}\n          placeholder=\"添加新任务\"\n          suffix={suffix}/>\n        <div className={`${classPrefix}_tasks`}>\n          <h4 className={`${classPrefix}_title`}>任务列表</h4>\n          <Icon type=\"unordered-list\" />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst mapDispatchToProps = (dispatch: any) => ({\n  addTask: (task: any[]) => dispatch(addTask(task))\n})\n\nexport default connect(null, mapDispatchToProps)(AddTask)\n\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Radio, Icon, Input } from 'antd';\nimport './style.scss';\nimport noRecord from '../../assets/image/no_record.svg';\nimport { IState } from '../../pages/Home/types/home.d';\nimport { updateTask as reduxUpdateTask } from '../../redux/actions/index';\nimport ajax from '../../methods/ajax/index';\n\ninterface IProps {\n  taskList: any[];\n  updateTask: (task: any[]) => any;\n}\nconst TaskList: React.FC<IProps> = ({taskList, updateTask}) => {\n  \n  const [editStatus, setEditStatus] = useState<any[]>([])\n  const [currentIndex, setCurrentIndex] = useState<number | null>(null)\n  const [currentValue, setCurrentValue] = useState('')\n\n  const [unfinishedTasks, setUnfinishedTasks] = useState<any[]>([]);\n\n  useEffect(() => {\n    if (taskList.length) {\n      const unfinished: any[] = taskList.filter(task => !task.completed && !task.deleted);\n      setUnfinishedTasks(unfinished)\n    }\n  }, [taskList])\n\n  const updateEditStatus = (index: number) => {\n    const newEditStatus: any[] = JSON.parse(JSON.stringify(editStatus))\n    if (currentIndex !== null && currentIndex !== index) {\n      newEditStatus[currentIndex] = false\n    }\n    newEditStatus[index] = !newEditStatus[index]\n    setEditStatus(newEditStatus)\n    setCurrentIndex(index)\n  }\n\n  interface IParams {\n    deleted?: boolean;\n    description?: string;\n    completed?: boolean;\n    completed_at?: Date;\n  }\n  const changeTask = (id: number, params: IParams = {}) => {\n    ajax.put(`/todos/${id}`, params)\n      .then(res => {\n        updateTask(res.data.resource)\n      })\n    if (currentIndex !== null && editStatus[currentIndex]) {\n      updateEditStatus(currentIndex)\n    }\n    setCurrentValue('')\n  }\n  const classPrefix = 'task-list';\n  return (\n    <div className={`${classPrefix}_task-list`}>\n      {unfinishedTasks.length ? (\n        <ul className={`${classPrefix}_container`}>\n          {unfinishedTasks.map((task, index) => (\n            <li className={`${classPrefix}_item`} key={task.id}>\n              <Radio\n                className={`${classPrefix}_item-content`}\n                onChange={ () => changeTask(task.id, {completed: true, completed_at: new Date()})}\n              >\n                <Input\n                  onChange={((e) => setCurrentValue(e.target.value))}\n                  onPressEnter={() => changeTask(task.id, {description: currentValue})}\n                  defaultValue={task.description} disabled={!editStatus[index]}\n                  className={`${classPrefix}_item-content-input`}\n                  data-edit={Boolean(editStatus[index])}\n                  suffix={editStatus[index] ? (\n                    <Icon type=\"enter\" onClick={(e) => {\n                      e.preventDefault(); changeTask(task.id, {description: currentValue});\n                    }}/>\n                  ) : <span />} />\n              </Radio>\n              <div className={`${classPrefix}_item-btns`}>\n                <Icon type=\"edit\" onClick={() => updateEditStatus(index)} />\n                <Icon type=\"delete\" onClick={() => changeTask(task.id, {deleted: true})}/>\n              </div>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <React.Fragment>\n          <img src={noRecord} alt=\"无记录\" className={`${classPrefix}_norecord`} />\n          <p className={`${classPrefix}_norecord-tips`}>暂无任务</p>\n        </React.Fragment>\n      )}\n    </div>\n  )\n}\n\n\nconst mapStateToProps = (state: IState) => ({ taskList: state.tasks })\nconst mapDispatchToProps = (dispatch: any) => ({\n  updateTask: (task: any[]) => dispatch(reduxUpdateTask(task))\n})\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TaskList)\n\n","import React from 'react';\nimport './style.scss';\nimport AddTask from '../AddTask/index';\nimport TaskList from '../TaskList/index';\n\n\nconst Tasks: React.FC = () => {\n  const classPrefix = 'tasks';\n  return (\n    <div className={`${classPrefix}-container`}>\n      <AddTask />\n      <TaskList />\n    </div>\n  )\n}\nexport default Tasks;","import React, { useState, useEffect, useRef } from 'react';\nimport { Modal, Input } from 'antd';\nimport { connect } from 'react-redux';\nimport { IState } from '../../pages/Home/types/home.d';\nimport playIcon from '../../assets/image/play.svg';\nimport quitIcon from '../../assets/image/quit.svg';\nimport './style.scss';\nimport { addTomato as reduxAddTomato, updateTomato as reduxUpdateTomato } from '../../redux/actions/tomato';\nimport ajax from '../../methods/ajax/index';\n\nconst useInterval = (callback: any, delay: number | null) => {\n  const savedCallback = useRef();\n\n  // Remember the latest function.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n     const tick = () => {\n      (savedCallback as any).current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\ninterface IProps {\n  tomatoList: any[];\n  addTomato: (tomato: any) => void;\n  updateTomato: (tomato: any) => void;\n}\ninterface ITomato {\n  aborted: null | boolean;\n  created_at: string;\n  description: string;\n  duration: number;\n  ended_at: string;\n  extra: any;\n  id: number;\n  manually_created: boolean;\n  started_at: string;\n  updated_at: string;\n  user_id: number;\n}\n\nconst CircularProgress: React.FC<IProps> = ({\n  tomatoList,\n  addTomato,\n  updateTomato\n}) => {\n  const totalTime: number = 1500;\n  const circleRadius = 120;\n  const circleLength = 2 * circleRadius * Math.PI;\n  const [progress, setProgress] = useState(0);\n  const [time, setTime] = useState(totalTime);\n  const [minutes, setMinutes] = useState('25');\n  const [seconds, setSeconds] = useState('00');\n  const [isRunning, setIsRunning] = useState(false);\n  const [currentTomato, setCurrentTomato] = useState<ITomato | null>(null);\n  const [visibleGiveUpModal, setVisibleGiveUpModal] = useState(false);\n  const [visibleFinishedModal, setVisibleFinishedModal] = useState(false);\n  const [taskDescription, setTaskDescription] = useState('');\n  const [giveUpReason, setGiveUpReason] = useState('');\n  const [stepSize, setStepSize] = useState(circleLength / totalTime);\n  const addZero = (time: number): string => {\n    return time >= 10 ? `${time}` : `0${time}`\n  }\n  const resetCountdown = () => {\n    setCurrentTomato(null);\n    setIsRunning(false);\n    setTime(totalTime);\n    setMinutes('25')\n    setSeconds('00')\n    setProgress(0)\n    setVisibleGiveUpModal(false)\n    setVisibleFinishedModal(false)\n    setGiveUpReason('')\n    setTaskDescription('')\n  }\n  const countdown = () => {\n    if(time <= 0) {\n      setVisibleFinishedModal(true)\n      setIsRunning(false);\n      return;\n    }\n    setMinutes(addZero(Math.floor(time / 60)));\n    setSeconds(addZero(Math.floor(time % 60)));\n    setTime(time - 1);\n    setProgress(progress + stepSize)\n  }\n  useInterval(() => {\n    countdown()\n  }, isRunning ? 1000 : null);\n\n  const startCountdown = (tomato: ITomato) => {\n    const startedAt = Date.parse(tomato.started_at)\n\t\tconst duration = tomato.duration\n    const timeNow = new Date().getTime()\n    if (timeNow - startedAt < duration) {\n      const time = (duration - timeNow + startedAt) / 1000;\n      setTime(time)\n      setStepSize(circleLength/time)\n      setIsRunning(true)\n    } else {\n      setVisibleFinishedModal(true)\n    }\n  }\n\n  const postTomato = (params: any) => {\n    ajax.post('/tomatoes', params)\n      .then(res => {\n        addTomato([res.data.resource])\n      })\n  }\n  useEffect(() => {\n    const fliterUnfinished = () => {\n      const unfinished: ITomato = tomatoList.filter(item => !item.ended_at && !item.aborted)[0];\n      if (unfinished) {\n        setCurrentTomato(unfinished)\n        startCountdown(unfinished)\n      } else {\n        resetCountdown()\n      }\n    }\n    fliterUnfinished();\n    // eslint-disable-next-line\n  }, [tomatoList])\n\n  const onPlay = () => {\n    postTomato({duration: totalTime * 1000})\n  }\n  const submitTomato = (parmas: any) => {\n    if (currentTomato) {\n      ajax.put(`/tomatoes/${currentTomato.id}`, parmas)\n        .then(res => {\n          updateTomato(res.data.resource)\n          resetCountdown()\n        })\n    }\n  }\n  const classPrefix = 'circular-progress';\n  return (\n    <div className={`${classPrefix}_container`}>\n      <div className={`${classPrefix}_progress`}>\n        <svg\n          version=\"1.1\"\n          baseProfile=\"full\"\n          width=\"244\"\n          height=\"244\"\n          xmlns=\"http://www.w3.org/2000/svg\">\n          <circle cx=\"122\" cy=\"122\" r={`${circleRadius}`} fill=\"none\" stroke=\"#f7f7f7\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n          <circle className={`${classPrefix}_circle`} cx=\"122\" cy=\"122\" r={`${circleRadius}`} fill=\"none\" stroke=\"#ff4949\" strokeWidth=\"2\" strokeDasharray={`${progress},1000`}/>\n        </svg>\n        <div className={`${classPrefix}_countdown`}>\n          {minutes} : {seconds}\n        </div>\n      </div>\n      <div className={`${classPrefix}_control-btns`}>\n        {isRunning ? (\n          <img src={quitIcon} alt=\"icon\" onClick={() => setVisibleGiveUpModal(true)}/>\n        ) : (\n          <img src={playIcon} alt=\"icon\" onClick={onPlay} />\n        )}\n      </div>\n      <Modal\n        title=\"你被什么事情打断了？\"\n        okText=\"放弃番茄\"\n        cancelText=\"继续番茄\"\n        visible={visibleGiveUpModal}\n        onOk={() => submitTomato({\n          description: giveUpReason,\n          aborted: true\n        })}\n        onCancel={() => setVisibleGiveUpModal(false)}>\n          <Input placeholder=\"请输入放弃番茄的原因\" onChange={(e) => setGiveUpReason(e.target.value)}/>\n      </Modal>\n\n      <Modal\n        title=\"你刚刚完成了什么\"\n        okText=\"提交\"\n        cancelText=\"放弃\"\n        visible={visibleFinishedModal}\n        onOk={() => submitTomato({\n          description: taskDescription || giveUpReason,\n          ended_at: new Date()\n        })}\n        onCancel={() => submitTomato({\n          description: giveUpReason,\n          aborted: true\n        })}>\n          <Input\n            placeholder=\"请输入完成的工作或放弃的原因\" onChange={\n              (e) => {setGiveUpReason(e.target.value); setTaskDescription(e.target.value);}\n            }/>\n      </Modal>\n    </div>\n  )\n}\n\nconst mapStateToProps = (state: IState) => ({\n  tomatoList: state.tomatos\n})\n\nconst mapDispatchToProps = (dispatch: any) => ({\n  addTomato: (tomato: any) => dispatch(reduxAddTomato(tomato)),\n  updateTomato: (tomato: any) => dispatch(reduxUpdateTomato(tomato))\n})\nexport default connect(mapStateToProps, mapDispatchToProps)(CircularProgress);","import React from 'react';\nimport './style.scss';\nimport CircularProgress from '../CircularProgress/index';\n\n\nconst AlarmClock: React.FC = () => {\n  const classPrefix = 'alarm-clock';\n  return (\n    <div className={`${classPrefix}_container`}>\n      <div className={`${classPrefix}_header`}>\n        开始番茄\n      </div>\n      <div>\n        <CircularProgress />\n      </div>\n    </div>\n  )\n}\nexport default AlarmClock;","import React, { useEffect, useState } from 'react';\nimport dayjs from 'dayjs';\nimport {\n  Chart,\n  Geom,\n  Axis,\n  Tooltip,\n} from \"bizcharts\";\nimport './style.scss';\n\nconst StatisticsChart: React.FC<any> = ({classPrefix, dataList, currentDate}) => {\n  const [average, setAverage] = useState('0');\n  const [growth, setGrowth] = useState('0');\n\n  const [chartData, setChartData] = useState<any>([]);\n\n  useEffect(() => {\n    const getOneMonthDays = () => {\n      return new Date(dayjs(currentDate).get('year'), dayjs(currentDate).get('month') + 1, 0).getDate()\n    }\n    const getDatalist = (date: string): any => {\n      let result: any[] = [];\n      result = dataList.filter((item: any) => {\n        if (item.ended_at) {\n          return dayjs(item.ended_at).format('YYYY-MM') === date\n        }\n        if (item.completed_at) {\n          return dayjs(item.completed_at).format('YYYY-MM') === date\n        }\n        return false;\n      })\n      return result;\n    }\n    const list = getDatalist(currentDate);\n\n    const previousList = getDatalist(dayjs(currentDate).subtract(1, 'month').format('YYYY-MM'));\n    const currentMonthDays = getOneMonthDays();\n    const setAverageAndGrowth = () => {\n      const newAverage = (list.length / currentMonthDays).toFixed(1);\n      if (previousList.length) {\n        const newGrowth = ((list.length - previousList.length) / previousList.length).toFixed(1);\n        setGrowth(newGrowth)\n      } else if (!previousList.length && list.length) {\n        setGrowth('1.0')\n      } else if (!previousList.length && !list.length) {\n        setGrowth('0')\n      }\n      setAverage(newAverage)\n    }\n\n    const formatChartData = () => {\n      const chartObj: any = {};\n      let newChartData: any[] = [];\n      list.forEach((value: any) => {\n        const key = dayjs(value.ended_at || value.completed_at).format('MM-DD');\n        if(chartObj[key]) {\n          chartObj[key].nums += 1\n        } else {\n          chartObj[key] = {};\n          chartObj[key].date = key;\n          chartObj[key].nums = 1;\n        }\n      })\n      newChartData = Array.from({length: currentMonthDays}, (v, i) => {\n        const key = dayjs(`${currentDate}-${i + 1}`).format('MM-DD');\n        if (chartObj[key]) {\n          return chartObj[key]\n        }\n        return {nums: 0, date: key}\n      })\n      setChartData(newChartData)\n    }\n    setAverageAndGrowth()\n    formatChartData()\n  }, [dataList, currentDate])\n\n  const formatGrowth = (growth: string): any => {\n    if (parseFloat(growth) > 0) {\n      return {\n        dataset: 'increment',\n        text: `+${growth}`\n      }\n    }\n    if (parseFloat(growth) < 0) {\n      return {\n        dataset: 'decrement',\n        text: growth\n      }\n    }\n    return {\n      dataset: '',\n      text: growth\n    }\n  }\n  const cols = {\n    nums: {\n      alias: '数量' \n    },\n    date: {\n      alias: '日期' \n    }\n  };\n  return (\n    <div className={`${classPrefix}-chart`}>\n      <div className={`${classPrefix}-chart_header`}>\n        <div className={`${classPrefix}-chart_header-item`}>\n          <span>{dataList.length}</span>\n          总数\n        </div>\n        <div className={`${classPrefix}-chart_header-item`}>\n          <span>{average}</span>\n          日平均数\n        </div>\n        <div className={`${classPrefix}-chart_header-item`}>\n          <span data-type={formatGrowth(growth).dataset}>{formatGrowth(growth).text}</span>\n          月增长量\n        </div>\n      </div>\n      <div className={`${classPrefix}-chart_body`}>\n        <Chart height={500} data={chartData} scale={cols} forceFit padding='auto'>\n          <Axis name=\"date\" label={{textStyle: {fill: '#fff'}}} />\n          <Axis name=\"nums\" label={{textStyle: {fill: '#fff'}}} />\n          <Tooltip crosshairs={{ type: \"y\" }} />\n          <Geom\n            type=\"line\"\n            position=\"date*nums\"\n            style={{ stroke: \"#49effd\", lineWidth: 2}}\n          />\n          <Geom\n            type=\"point\"\n            position=\"date*nums\"\n            size={4}\n            shape={\"circle\"}\n            style={{ stroke: \"#fff\", lineWidth: 1}}\n          />\n        </Chart>\n      </div>\n    </div>\n  )\n}\n\nexport default StatisticsChart","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Tabs, DatePicker } from 'antd';\nimport './style.scss';\nimport StatisticsChart from './chart';\nimport { IState } from '../../pages/Home/types/home.d';\nimport moment from 'moment';\nimport dayjs from 'dayjs'\n\nconst { MonthPicker } = DatePicker;\nconst TabPane = Tabs.TabPane;\n\n\nconst Statistics: React.FC<any> = ({tomatoList, taskList}) => {\n  \n  const [currentDate, setCurrentDate] = useState(dayjs().format('YYYY-MM'));\n\n\n\n  const operations = <MonthPicker\n    format=\"YYYY-MM\" value={moment(currentDate)}\n    onChange={(e, dateString) => {setCurrentDate(dateString || dayjs().format('YYYY-MM'))}}/>\n  const classPrefix = 'statistics';\n  return (\n    <div className={`${classPrefix}-container`}>\n      <Tabs tabBarExtraContent={operations} type='card'>\n        <TabPane tab=\"番茄统计\" key=\"1\">\n          <StatisticsChart\n            classPrefix={classPrefix} dataList={tomatoList}\n            currentDate={currentDate} />\n        </TabPane>\n        <TabPane tab=\"任务统计\" key=\"2\">\n        <StatisticsChart\n          classPrefix={classPrefix} dataList={taskList}\n          currentDate={currentDate} />\n        </TabPane>\n      </Tabs>\n    </div>\n  )\n}\n\nconst mapStateToProps = (state: IState) => ({\n  tomatoList: state.tomatos,\n  taskList: state.tasks\n})\nexport default connect(mapStateToProps)(Statistics)","import React, { useState } from 'react';\nimport { Input } from 'antd';\nimport dayjs from 'dayjs'\nimport './style.scss';\n\n\nconst HistoryItem: React.FC<any> = ({item, updateMethod}) => {\n  const [disabled, setDisabled] = useState(true);\n  const [description, setDescription] = useState('');\n  const getTime = (data: any): string => {\n    const {started_at, ended_at, created_at, updated_at, completed_at, deleted} = data;\n    if(started_at && ended_at) {\n      return `${dayjs(started_at).format('HH:mm')} - ${dayjs(ended_at).format('HH:mm')}`\n    }\n    if(created_at && completed_at) {\n      return `${dayjs(created_at).format('HH:mm')} - ${dayjs(completed_at).format('HH:mm')}`\n    }\n    if(deleted) {\n      return `${dayjs(updated_at).format('HH:mm')}`\n    }\n    return `${dayjs(created_at).format('HH:mm')} - ${dayjs(updated_at).format('HH:mm')}`\n  }\n  const modifyItem = () => {\n    if(disabled) {\n      return setDisabled(false)\n    }\n    updateMethod(item.id, {description})\n    setDisabled(true)\n    setDescription('')\n  }\n  const classPrefix = 'history-item';\n  return (\n    <li key={item.id} className={`${classPrefix}_container`}>\n      <div>\n        {getTime(item)}\n      </div>\n      <div className={`${classPrefix}_desc`}>\n        <Input\n          value={description || item.description} disabled={disabled}\n          onChange={(e) => setDescription(e.target.value)}\n          />\n        {item.manually_created && (<span className={`${classPrefix}_red-text`}>(补)</span>)}\n      </div>\n      <div className={`${classPrefix}_btn`} onClick={modifyItem}>\n        {disabled ? '修改' : '提交'}\n      </div>\n      {!disabled && (\n        <div className={`${classPrefix}_btn`} onClick={() => {setDisabled(true)}}>\n          取消\n        </div>\n      )}\n    </li>\n  )\n}\n\nexport default HistoryItem\n","import React from 'react';\nimport noRecord from '../../assets/image/no_record.svg';\nimport './style.scss';\n\nconst DefaultPage: React.FC = () => {\n  const classPrefix = 'default-page'\n  return (\n    <div className={`${classPrefix}_container`}>\n      <img src={noRecord} alt=\"无记录\" className={`${classPrefix}_norecord`} />\n      <p className={`${classPrefix}_norecord-tips`}>暂无记录</p>\n    </div>\n  )\n}\n\nexport default DefaultPage","import React, { useEffect, useState } from 'react';\nimport './style.scss';\nimport HistoryItem from '../HistoryItem/index';\nimport DefaultPage from '../DefaultPage/index';\n\ninterface IProps {\n  list: any[];\n  updateMethod: (id: number, params: any) => void;\n  type: string;\n}\nconst HistoryList: React.FC<IProps> = ({list, updateMethod, type}) => {\n  const [config, setConfig] = useState<any>({})\n\n  const getWeek = (dateStr: string): string => {\n    const cnWeek = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];\n    const index = new Date(dateStr).getDay()\n    return cnWeek[index]\n  }\n  const formatTime = (list: any[]): string => {\n    let ms = 0;\n    let hours = 0;\n    let minutes = 0;\n    list.forEach((tomato: any) => {\n      const { duration } = tomato;\n      ms += duration || 0\n    })\n    minutes = (ms / (1000*60));\n    hours = minutes / 60;\n    return `${Math.floor(hours)} 小时 ${Math.floor(minutes % 60)} 分钟`\n  }\n\n  useEffect(() => {\n    if (type === 'finishedTomato') {\n      setConfig({\n        visibleTotal: true,\n        unit: '番茄',\n        visibleTotalTime: true\n      })\n    } else if (type === 'finishedTasks') {\n      setConfig({\n        visibleTotal: true,\n        unit: '任务',\n        visibleTotalTime: false\n      })\n    }\n  }, [type])\n  const classPrefix = 'history';\n  \n  return (\n    <div className={`${classPrefix}-container`}>\n      {list.length && list.map((item: any) => (\n        <div key={item.date} className={`${classPrefix}-content`}>\n          <div>\n            <div className={`${classPrefix}-date`}>\n              <p className={`${classPrefix}-text`}>{item.dateStr}</p>\n              <p className={`${classPrefix}-text`}>{getWeek(item.date)}</p>\n            </div>\n            {config.visibleTotal && (<p className={`${classPrefix}-text`}>\n              共完成了<span className={`${classPrefix}-strong_text`}>{item.subList.length}</span>个{config.unit}\n            </p>)}\n            {config.visibleTotalTime && <p className={`${classPrefix}-text`}>总计&nbsp;{formatTime(item.subList)}</p>}\n          </div>\n          <ul className={`${classPrefix}-list`}>\n            {item.subList.length && item.subList.map((subItem: any) => (\n              <HistoryItem item={subItem} key={subItem.id} updateMethod={updateMethod} />\n            ))}\n          </ul>\n        </div>\n      ))}\n      {!list.length && <DefaultPage />}\n    </div>\n  )\n}\n\nexport default HistoryList","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\nimport { Tabs, Icon, Modal, DatePicker, Input, message } from 'antd';\nimport dayjs from 'dayjs'\nimport './style.scss';\nimport { IState } from '../../pages/Home/types/home';\nimport HistoryList from '../HistoryList/index';\nimport ajax from '../../methods/ajax/index';\nimport { updateTomato as reduxUpdateTomato, addTomato as reduxAddTomato } from '../../redux/actions/tomato';\n\n\n\nconst TabPane = Tabs.TabPane;\nconst TomatosHistory: React.FC<any> = ({tomatoList, updateTomato, addTomato}) => {\n  const [finishedTomatos, setFinishedTomatos] = useState<any[]>([]);\n  const [abortedTomatos, setAbortedTomatos] = useState<any[]>([]);\n  const [finishedTotal, setFinishedTotal] = useState(0);\n  const [abortedTotal, setAbortedTotal] = useState(0);\n  const [currentKey, setCurrentKey] = useState('finishedTomatos');\n  const [startValue, setStartValue] = useState<any>(null);\n  const [endValue, setEndValue] = useState<any>(null);\n  const [visibleModal, setVisibleModal] = useState(false);\n  const [describe, setDescribe] = useState('');\n\n  const modifyTomato = (id: number, params: any) => {\n    ajax.put(`/tomatoes/${id}`, params)\n      .then(res => {\n        updateTomato(res.data.resource)\n      })\n  }\n\n  const disabledStartDate = (startValue: any) => {\n    if (!startValue || !endValue) {\n      return false;\n    }\n    return startValue.valueOf() > endValue.valueOf();\n  };\n\n  const disabledEndDate = (endValue: any) => {\n    if (!endValue || !startValue) {\n      return false;\n    }\n    return endValue.valueOf() <= startValue.valueOf();\n  };\n\n  const clearAddTomatoRecord = () => {\n    setStartValue(null)\n    setEndValue(null)\n    setVisibleModal(false)\n    setDescribe('')\n  }\n  const canSubmit = (): boolean => {\n    if (!startValue) {\n      message.error('请选择开始时间');\n      return false;\n    }\n    if (!endValue) {\n      message.error('请选择结束时间');\n      return false;\n    }\n    if (!describe) {\n      message.error('请填写关于补记番茄的描述');\n      return false;\n    }\n    return true\n  }\n  const supplementaryTomatoRecord = () => {\n    if (canSubmit()) {\n      ajax.post('/tomatoes', {\n        started_at: new Date(startValue.valueOf()),\n        ended_at: new Date(endValue.valueOf()),\n        duration: endValue.valueOf() - startValue.valueOf(),\n        description: describe,\n        manually_created: true\n      })\n        .then(res => {\n          addTomato([res.data.resource])\n          clearAddTomatoRecord()\n        })\n    }\n  }\n  useEffect(() => {\n    let finished: object = {};\n    let aborted: object = {};\n    const formatTomatos = (list: any[]) => {\n      let result: any = {};\n      list.forEach((item: any) => {\n        const key = dayjs(item.ended_at || item.created_at).format('YYYY/MM/DD')\n        if (result[key]) {\n          result[key].subList.push(item)\n        } else {\n          result[key] = {\n            date: key,\n            dateStr: dayjs(key).format('YYYY年MM月DD日'),\n            subList: [item]\n          }\n        }\n      })\n      return result\n    }\n    const classified = () => {\n      let finishedList: any[] = [];\n      let abortedList: any[] = [];\n      tomatoList.forEach((tomato: any) => {\n        if (tomato.ended_at) {\n          finishedList.push(tomato);\n        }\n        if (tomato.aborted) {\n          abortedList.push(tomato);\n        }\n      })\n      setFinishedTotal(finishedList.length)\n      setAbortedTotal(abortedList.length)\n      finished = formatTomatos(finishedList);\n      aborted = formatTomatos(abortedList);\n    }\n    const sortTomatos = (data: any) => {\n      let keys = Object.keys(data);\n      keys.sort((a: string, b: string) => new Date(b).getTime() - new Date(a).getTime())\n      return keys.map((value: any) => data[value])\n    }\n    classified()\n    setFinishedTomatos(sortTomatos(finished))\n    setAbortedTomatos(sortTomatos(aborted))\n  }, [tomatoList])\n\n  const operations = (currentKey === 'finishedTomatos' ? (\n    <Icon type=\"plus-square\"\n      style={{\n        fontSize: 24,\n        color: '#ffffff',\n        cursor: 'pointer'\n      }}\n      onClick={() => {setVisibleModal(true)}}\n    />\n  ): <span></span>)\n  const classPrefix = 'tomatos-history';\n  return (\n    <div className={`${classPrefix}_container`}>\n      <Tabs type='card' onChange={(e) => {setCurrentKey(e)}} tabBarExtraContent={operations}>\n        <TabPane tab=\"完成的番茄\" key=\"finishedTomatos\">\n          <HistoryList list={finishedTomatos} updateMethod={modifyTomato} type=\"finishedTomato\" />\n        </TabPane>\n        <TabPane tab=\"打断记录\" key=\"abortedTomatos\">\n          <HistoryList list={abortedTomatos} updateMethod={modifyTomato} type=\"abortedTomata\"/>\n        </TabPane>\n      </Tabs>\n      {(finishedTotal || abortedTotal )&& (\n        <p className={`${classPrefix}_total`}>\n          总计：\n          {currentKey === 'finishedTomatos' ? finishedTotal : abortedTotal}\n          个番茄\n        </p>\n      )}\n      <Modal\n        visible={visibleModal} title=\"补记番茄\"\n        onCancel={clearAddTomatoRecord} onOk={supplementaryTomatoRecord}>\n        <div className={`${classPrefix}_modal-item`}>\n          <span>开始时间：</span>\n          <DatePicker\n            disabledDate={disabledStartDate}\n            showTime\n            format=\"YYYY-MM-DD HH:mm:ss\"\n            value={startValue}\n            placeholder=\"开始时间\"\n            onChange={(value) => {setStartValue(value)}}\n          />\n        </div>\n        <div className={`${classPrefix}_modal-item`}>\n          <span>结束时间：</span>\n          <DatePicker\n            disabledDate={disabledEndDate}\n            showTime\n            format=\"YYYY-MM-DD HH:mm:ss\"\n            value={endValue}\n            placeholder=\"结束时间\"\n            onChange={(value) => {setEndValue(value)}}\n          />\n        </div>\n        <div className={`${classPrefix}_modal-item`}>\n          <span>描述：</span>\n          <Input value={describe} type='text' onChange={(e) => setDescribe(e.target.value)}/>\n        </div>\n      </Modal>\n    </div>\n  )\n}\n\nconst mapStateToProps = (state: IState) => ({\n  tomatoList: state.tomatos\n})\n\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  updateTomato: (tomato: any) => dispatch(reduxUpdateTomato(tomato)),\n  addTomato: (tomato: any) => dispatch(reduxAddTomato(tomato)),\n})\nexport default connect(mapStateToProps, mapDispatchToProps)(TomatosHistory);","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\nimport { Tabs } from 'antd';\nimport dayjs from 'dayjs';\nimport { IState } from '../../pages/Home/types/home';\nimport HistoryList from '../HistoryList/index';\nimport { updateTask as reduxUpdateTask } from '../../redux/actions/task';\nimport './style.scss';\nimport ajax from '../../methods/ajax';\n\nconst TabPane = Tabs.TabPane;\nconst TaskHistory: React.FC<any> = ({ taskList, updateTask }) => {\n  const [finishedTasks, setFinishedTasks] = useState<any[]>([]);\n  const [deletedTasks, setDeletedTasks] = useState<any[]>([]);\n  const [finishedTotal, setFinishedTotal] = useState(0);\n  const [deletedTotal, setDeletedTotal] = useState(0);\n  const [currentKey, setCurrentKey] = useState('finishedTasks');\n\n  useEffect(() => {\n    let finished: object = {};\n    let deleted: object = {};\n    const formatTomatos = (list: any[]) => {\n      let result: any = {};\n      list.forEach((item: any) => {\n        const key = dayjs(item.completed_at || item.updated_at).format('YYYY/MM/DD')\n        if (result[key]) {\n          result[key].subList.push(item)\n        } else {\n          result[key] = {\n            date: key,\n            dateStr: dayjs(key).format('YYYY年MM月DD日'),\n            subList: [item]\n          }\n        }\n      })\n      return result\n    }\n    const classified = () => {\n      let finishedList: any[] = [];\n      let deletedList: any[] = [];\n      taskList.forEach((task: any) => {\n        if (task.completed) {\n          finishedList.push(task);\n        }\n        if (task.deleted) {\n          deletedList.push(task);\n        }\n      })\n      setFinishedTotal(finishedList.length)\n      setDeletedTotal(deletedList.length)\n      finished = formatTomatos(finishedList);\n      deleted = formatTomatos(deletedList);\n    }\n    const sortTomatos = (data: any) => {\n      let keys = Object.keys(data);\n      keys.sort((a: string, b: string) => new Date(b).getTime() - new Date(a).getTime())\n      return keys.map((value: any) => data[value])\n    }\n    classified()\n    setFinishedTasks(sortTomatos(finished))\n    setDeletedTasks(sortTomatos(deleted))\n    console.log(sortTomatos(finished), sortTomatos(deleted))\n  }, [taskList])\n\n  const modifyTask = (id: number, params: any) => {\n    ajax.put(`/todos/${id}`, params)\n      .then(res => {\n        updateTask(res.data.resource)\n      })\n  }\n  const classPrefix = 'tasks-history';\n  return (\n    <div className={`${classPrefix}_container`}>\n      <Tabs type='card' onChange={(e) => {setCurrentKey(e)}}>\n        <TabPane tab=\"已完成的任务\" key=\"finishedTasks\">\n          <HistoryList list={finishedTasks} updateMethod={modifyTask} type=\"finishedTasks\" />\n        </TabPane>\n        <TabPane tab=\"已删除的任务\" key=\"deletedTasks\">\n          <HistoryList list={deletedTasks} updateMethod={modifyTask} type=\"\"/>\n        </TabPane>\n      </Tabs>\n      {(finishedTotal || deletedTotal )&& (\n        <p className={`${classPrefix}_total`}>\n          总计：\n          {currentKey === 'finishedTasks' ? finishedTotal : deletedTotal}\n          个任务\n        </p>\n      )}\n    </div>\n  )\n}\n\nconst mapStateToProps = (state: IState) => ({\n  taskList: state.tasks\n})\n\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  updateTask: (task: any) => dispatch(reduxUpdateTask(task)),\n})\nexport default connect(mapStateToProps, mapDispatchToProps)(TaskHistory)\n","import React, { useState, useEffect } from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { connect } from 'react-redux';\nimport './style.scss';\nimport Aside from '../../components/Aside/index';\nimport Tasks from '../../components/Tasks/index';\nimport AlarmClock from '../../components/AlarmClock/index';\nimport Statistics from '../../components/Statistics/index';\nimport TomatosHistory from '../../components/TomatosHistory/index';\nimport TasksHistory from '../../components/TasksHistory/index';\nimport ajax from '../../methods/ajax/index';\nimport { TOMATO_ALARM_CLOCK_X_TOKEN } from '../../methods/constant/index';\nimport { initTaskList, initTomatoList } from '../../redux/actions/index';\n\n\nconst Home: React.FC<RouteComponentProps | any> = ({history, initTasks, initTomatos}) => {\n  const [username, setUsername] = useState('');\n  const [currentPage, setCurrentPage] = useState('home');\n  const navList = [\n    {key: 'home', title: '主页'},\n    {key: 'statistics', title: '统计'},\n    {key: 'tomatosHistory', title: '番茄历史'},\n    {key: 'tasksHistory', title: '任务历史'},\n  ]\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const result = await Promise.all([\n          ajax.get('https://gp-server.hunger-valley.com/me'),\n          ajax.get('https://gp-server.hunger-valley.com/todos'),\n          ajax.get('https://gp-server.hunger-valley.com/tomatoes'),\n        ])\n        setUsername(result[0].data.account);\n        initTasks(result[1].data.resources);\n        initTomatos(result[2].data.resources)\n      } catch (error) {\n      }\n    };\n    fetchData();\n    return () => {\n      initTomatos([])\n      initTasks([])\n    }\n  }, [initTomatos, initTasks]);\n  const logOut = () => {\n    localStorage.removeItem(TOMATO_ALARM_CLOCK_X_TOKEN)\n    history.replace('/login')\n  }\n  const classPrefix = 'home';\n  return (\n    <section className={`${classPrefix}-container`}>\n      <Aside\n        username={username} navList={navList} logOut={logOut} currentPage={currentPage}\n        upDateCurrentPage={setCurrentPage} />\n      <main className={`${classPrefix}-main`} data-active={currentPage === 'home'}>\n        <div className={`${classPrefix}-main_box`}><AlarmClock /></div>\n        <div className={`${classPrefix}-main_box`}><Tasks /></div>\n      </main>\n      <main className={`${classPrefix}-main`} data-active={currentPage === 'statistics'}>\n        <Statistics />\n      </main>\n      <main className={`${classPrefix}-main`} data-active={currentPage === 'tomatosHistory'}>\n        <TomatosHistory />\n      </main>\n      <main className={`${classPrefix}-main`} data-active={currentPage === 'tasksHistory'}>\n        <TasksHistory />\n      </main>\n    </section>\n  )\n}\n\nconst mapDispatchToProps = (dispatch: any) => ({\n  initTasks: (taskList: any[]) => dispatch(initTaskList(taskList)),\n  initTomatos: (tomatoList: any[]) => dispatch(initTomatoList(tomatoList))\n})\nexport default connect(null, mapDispatchToProps)(Home);"],"sourceRoot":""}