(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{166:function(e,t,a){"use strict";var n=a(184),c=a.n(n),r=a(65),o=a(172),s=c.a.create({baseURL:"https://gp-server.hunger-valley.com",timeout:2e3,headers:{"t-app-id":"XTrcPmPP6mK73ZgLHoXfnRef","t-app-secret":"FNhsEEYYNvPK4xt5nLG9Qfv9"}});s.interceptors.request.use(function(e){var t=localStorage.getItem(o.a);return t&&(e.headers.Authorization="Bearer ".concat(t)),e},function(e){return Promise.reject(e)}),s.interceptors.response.use(function(e){return e.headers["x-token"]&&localStorage.setItem(o.a,e.headers["x-token"]),e},function(e){return 401===e.response.status&&r.a.replace("/login"),Promise.reject(e)}),t.a=s},172:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n="TOMATO_ALARM_CLOCK_X_TOKEN"},174:function(e,t,a){e.exports=a.p+"static/media/logo.f4002783.svg"},193:function(e,t,a){e.exports=a.p+"static/media/no_record.7b11cbdf.svg"},198:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},217:function(e,t,a){},241:function(e,t,a){},248:function(e,t,a){},250:function(e,t,a){e.exports=a.p+"static/media/play.f86935e7.svg"},251:function(e,t,a){e.exports=a.p+"static/media/quit.1dce9373.svg"},252:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){},277:function(e,t,a){},278:function(e,t,a){},279:function(e,t,a){},283:function(e,t,a){"use strict";a.r(t);var n=a(209),c=a.n(n),r=a(211),o=a(165),s=a(0),i=a.n(s),l=a(62),u=(a(212),a(213),a(174)),m=a.n(u),d=function(e){var t=e.username,a=e.logOut,n=e.navList,c=e.currentPage,r=e.upDateCurrentPage;return i.a.createElement("aside",{className:"".concat("aside","-aside")},i.a.createElement("div",null,i.a.createElement("img",{src:m.a,alt:"logo",className:"".concat("aside","-logo")}),i.a.createElement("p",{className:"".concat("aside","-username")},t)),i.a.createElement("div",{className:"".concat("aside","-menu")},n.length&&n.map(function(e){return i.a.createElement("div",{key:e.key,className:"".concat("aside","-menu_item"),"data-active":e.key===c,onClick:function(){return r(e.key)}},e.title)})),i.a.createElement("p",{className:"".concat("aside","-logout"),onClick:a},"Log out"))},f=(a(214),a(167),a(170)),p=(a(89),a(60)),h=(a(217),a(9)),b=function(e){return{type:h.e,task:e}},v=function(e){return{type:h.b,tomato:e}},E=function(e){return{type:h.f,tomato:e}},O=a(166),g=Object(l.b)(null,function(e){return{addTask:function(t){return e(function(e){return{type:h.a,task:e}}(t))}}})(function(e){var t=e.addTask,a=Object(s.useState)(""),n=Object(o.a)(a,2),c=n[0],r=n[1],l=function(e){O.a.post("https://gp-server.hunger-valley.com/todos",{description:e}).then(function(e){t(e.data.resource)}).catch(function(e){console.log(e)})},u=i.a.createElement(p.a,{type:"enter",className:"".concat("add-task","_input-icon"),onClick:function(){c&&(l(c),r(""))}});return i.a.createElement("div",null,i.a.createElement("div",{className:"".concat("add-task","_top")},i.a.createElement("div",{className:"".concat("add-task","_header")},i.a.createElement("h4",{className:"".concat("add-task","_title")},"\u6dfb\u52a0\u4efb\u52a1"),i.a.createElement(p.a,{type:"plus-square"})),i.a.createElement(f.a,{className:"".concat("add-task","_input"),value:c,onChange:function(e){r(e.target.value)},onKeyUp:function(e){e.persist(),13===e.keyCode&&""!==c&&(l(c),r(""))},placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",suffix:u}),i.a.createElement("div",{className:"".concat("add-task","_tasks")},i.a.createElement("h4",{className:"".concat("add-task","_title")},"\u4efb\u52a1\u5217\u8868"),i.a.createElement(p.a,{type:"unordered-list"}))))}),k=(a(239),a(281)),j=(a(241),a(193)),y=a.n(j),_=Object(l.b)(function(e){return{taskList:e.tasks}},function(e){return{updateTask:function(t){return e(b(t))}}})(function(e){var t=e.taskList,a=e.updateTask,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],l=c[1],u=Object(s.useState)(null),m=Object(o.a)(u,2),d=m[0],h=m[1],b=Object(s.useState)(""),v=Object(o.a)(b,2),E=v[0],g=v[1],j=Object(s.useState)([]),_=Object(o.a)(j,2),N=_[0],T=_[1];Object(s.useEffect)(function(){if(t.length){var e=t.filter(function(e){return!e.completed&&!e.deleted});T(e)}},[t]);var S=function(e){var t=JSON.parse(JSON.stringify(r));null!==d&&d!==e&&(t[d]=!1),t[e]=!t[e],l(t),h(e)},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O.a.put("/todos/".concat(e),t).then(function(e){a(e.data.resource)}),null!==d&&r[d]&&S(d),g("")};return i.a.createElement("div",{className:"".concat("task-list","_task-list")},N.length?i.a.createElement("ul",{className:"".concat("task-list","_container")},N.map(function(e,t){return i.a.createElement("li",{className:"".concat("task-list","_item"),key:e.id},i.a.createElement(k.a,{className:"".concat("task-list","_item-content"),onChange:function(){return Y(e.id,{completed:!0,completed_at:new Date})}},i.a.createElement(f.a,{onChange:function(e){return g(e.target.value)},onPressEnter:function(){return Y(e.id,{description:E})},defaultValue:e.description,disabled:!r[t],className:"".concat("task-list","_item-content-input"),"data-edit":Boolean(r[t]),suffix:r[t]?i.a.createElement(p.a,{type:"enter",onClick:function(t){t.preventDefault(),Y(e.id,{description:E})}}):i.a.createElement("span",null)})),i.a.createElement("div",{className:"".concat("task-list","_item-btns")},i.a.createElement(p.a,{type:"edit",onClick:function(){return S(t)}}),i.a.createElement(p.a,{type:"delete",onClick:function(){return Y(e.id,{deleted:!0})}})))})):i.a.createElement(i.a.Fragment,null,i.a.createElement("img",{src:y.a,alt:"\u65e0\u8bb0\u5f55",className:"".concat("task-list","_norecord")}),i.a.createElement("p",{className:"".concat("task-list","_norecord-tips")},"\u6682\u65e0\u4efb\u52a1")))}),N=function(){return i.a.createElement("div",{className:"".concat("tasks","-container")},i.a.createElement(g,null),i.a.createElement(_,null))},T=(a(248),a(194),a(205)),S=a(250),Y=a.n(S),x=a(251),M=a.n(x),D=(a(252),Object(l.b)(function(e){return{tomatoList:e.tomatos}},function(e){return{addTomato:function(t){return e(v(t))},updateTomato:function(t){return e(E(t))}}})(function(e){var t=e.tomatoList,a=e.addTomato,n=e.updateTomato,c=240*Math.PI,r=Object(s.useState)(0),l=Object(o.a)(r,2),u=l[0],m=l[1],d=Object(s.useState)(1500),p=Object(o.a)(d,2),h=p[0],b=p[1],v=Object(s.useState)("25"),E=Object(o.a)(v,2),g=E[0],k=E[1],j=Object(s.useState)("00"),y=Object(o.a)(j,2),_=y[0],N=y[1],S=Object(s.useState)(!1),x=Object(o.a)(S,2),D=x[0],C=x[1],L=Object(s.useState)(null),w=Object(o.a)(L,2),H=w[0],P=w[1],A=Object(s.useState)(!1),F=Object(o.a)(A,2),I=F[0],K=F[1],q=Object(s.useState)(!1),B=Object(o.a)(q,2),J=B[0],R=B[1],W=Object(s.useState)(""),z=Object(o.a)(W,2),G=z[0],X=z[1],U=Object(s.useState)(""),Q=Object(o.a)(U,2),V=Q[0],Z=Q[1],$=Object(s.useState)(c/1500),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=function(e){return e>=10?"".concat(e):"0".concat(e)},ce=function(){P(null),C(!1),b(1500),k("25"),N("00"),m(0),K(!1),R(!1),Z(""),X("")};!function(e,t){var a=Object(s.useRef)();Object(s.useEffect)(function(){a.current=e},[e]),Object(s.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}(function(){!function(){if(h<=0)return R(!0),void C(!1);k(ne(Math.floor(h/60))),N(ne(Math.floor(h%60))),b(h-1),m(u+te)}()},D?1e3:null);Object(s.useEffect)(function(){!function(){var e=t.filter(function(e){return!e.ended_at&&!e.aborted})[0];e?(P(e),function(e){var t=Date.parse(e.started_at),a=e.duration,n=(new Date).getTime();if(n-t<a){var r=(a-n+t)/1e3;b(r),ae(c/r),C(!0)}else R(!0)}(e)):ce()}()},[t]);var re=function(e){H&&O.a.put("/tomatoes/".concat(H.id),e).then(function(e){n(e.data.resource),ce()})},oe="circular-progress";return i.a.createElement("div",{className:"".concat(oe,"_container")},i.a.createElement("div",{className:"".concat(oe,"_progress")},i.a.createElement("svg",{version:"1.1",baseProfile:"full",width:"244",height:"244",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("circle",{cx:"122",cy:"122",r:"".concat(120),fill:"none",stroke:"#f7f7f7",strokeWidth:"2",strokeLinecap:"round"}),i.a.createElement("circle",{className:"".concat(oe,"_circle"),cx:"122",cy:"122",r:"".concat(120),fill:"none",stroke:"#ff4949",strokeWidth:"2",strokeDasharray:"".concat(u,",1000")})),i.a.createElement("div",{className:"".concat(oe,"_countdown")},g," : ",_)),i.a.createElement("div",{className:"".concat(oe,"_control-btns")},D?i.a.createElement("img",{src:M.a,alt:"icon",onClick:function(){return K(!0)}}):i.a.createElement("img",{src:Y.a,alt:"icon",onClick:function(){var e;e={duration:15e5},O.a.post("/tomatoes",e).then(function(e){a([e.data.resource])})}})),i.a.createElement(T.a,{title:"\u4f60\u88ab\u4ec0\u4e48\u4e8b\u60c5\u6253\u65ad\u4e86\uff1f",okText:"\u653e\u5f03\u756a\u8304",cancelText:"\u7ee7\u7eed\u756a\u8304",visible:I,onOk:function(){return re({description:V,aborted:!0})},onCancel:function(){return K(!1)}},i.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u653e\u5f03\u756a\u8304\u7684\u539f\u56e0",onChange:function(e){return Z(e.target.value)}})),i.a.createElement(T.a,{title:"\u4f60\u521a\u521a\u5b8c\u6210\u4e86\u4ec0\u4e48",okText:"\u63d0\u4ea4",cancelText:"\u653e\u5f03",visible:J,onOk:function(){return re({description:G||V,ended_at:new Date})},onCancel:function(){return re({description:V,aborted:!0})}},i.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u5b8c\u6210\u7684\u5de5\u4f5c\u6216\u653e\u5f03\u7684\u539f\u56e0",onChange:function(e){Z(e.target.value),X(e.target.value)}})))})),C=function(){return i.a.createElement("div",{className:"".concat("alarm-clock","_container")},i.a.createElement("div",{className:"".concat("alarm-clock","_header")},"\u5f00\u59cb\u756a\u8304"),i.a.createElement("div",null,i.a.createElement(D,null)))},L=(a(181),a(182)),w=(a(207),a(204)),H=(a(198),a(171)),P=a.n(H),A=a(261),F=function(e){var t=e.classPrefix,a=e.dataList,n=e.currentDate,c=Object(s.useState)("0"),r=Object(o.a)(c,2),l=r[0],u=r[1],m=Object(s.useState)("0"),d=Object(o.a)(m,2),f=d[0],p=d[1],h=Object(s.useState)([]),b=Object(o.a)(h,2),v=b[0],E=b[1];Object(s.useEffect)(function(){var e=function(e){return a.filter(function(t){return t.ended_at?P()(t.ended_at).format("YYYY-MM")===e:!!t.completed_at&&P()(t.completed_at).format("YYYY-MM")===e})},t=e(n),c=e(P()(n).subtract(1,"month").format("YYYY-MM")),r=new Date(P()(n).get("year"),P()(n).get("month")+1,0).getDate();!function(){var e=(t.length/r).toFixed(1);if(c.length){var a=((t.length-c.length)/c.length).toFixed(1);p(a)}else!c.length&&t.length?p("1.0"):c.length||t.length||p("0");u(e)}(),function(){var e,a={};t.forEach(function(e){var t=P()(e.ended_at||e.completed_at).format("MM-DD");a[t]?a[t].nums+=1:(a[t]={},a[t].date=t,a[t].nums=1)}),e=Array.from({length:r},function(e,t){var c=P()("".concat(n,"-").concat(t+1)).format("MM-DD");return a[c]?a[c]:{nums:0,date:c}}),E(e)}()},[a,n]);var O=function(e){return parseFloat(e)>0?{dataset:"increment",text:"+".concat(e)}:parseFloat(e)<0?{dataset:"decrement",text:e}:{dataset:"",text:e}};return i.a.createElement("div",{className:"".concat(t,"-chart")},i.a.createElement("div",{className:"".concat(t,"-chart_header")},i.a.createElement("div",{className:"".concat(t,"-chart_header-item")},i.a.createElement("span",null,a.length),"\u603b\u6570"),i.a.createElement("div",{className:"".concat(t,"-chart_header-item")},i.a.createElement("span",null,l),"\u65e5\u5e73\u5747\u6570"),i.a.createElement("div",{className:"".concat(t,"-chart_header-item")},i.a.createElement("span",{"data-type":O(f).dataset},O(f).text),"\u6708\u589e\u957f\u91cf")),i.a.createElement("div",{className:"".concat(t,"-chart_body")},i.a.createElement(A.Chart,{height:500,data:v,scale:{nums:{alias:"\u6570\u91cf"},date:{alias:"\u65e5\u671f"}},forceFit:!0,padding:"auto"},i.a.createElement(A.Axis,{name:"date",label:{textStyle:{fill:"#fff"}}}),i.a.createElement(A.Axis,{name:"nums",label:{textStyle:{fill:"#fff"}}}),i.a.createElement(A.Tooltip,{crosshairs:{type:"y"}}),i.a.createElement(A.Geom,{type:"line",position:"date*nums",style:{stroke:"#49effd",lineWidth:2}}),i.a.createElement(A.Geom,{type:"point",position:"date*nums",size:4,shape:"circle",style:{stroke:"#fff",lineWidth:1}}))))},I=a(16),K=a.n(I),q=w.a.MonthPicker,B=L.a.TabPane,J=Object(l.b)(function(e){return{tomatoList:e.tomatos,taskList:e.tasks}})(function(e){var t=e.tomatoList,a=e.taskList,n=Object(s.useState)(P()().format("YYYY-MM")),c=Object(o.a)(n,2),r=c[0],l=c[1],u=i.a.createElement(q,{format:"YYYY-MM",value:K()(r),onChange:function(e,t){l(t||P()().format("YYYY-MM"))}});return i.a.createElement("div",{className:"".concat("statistics","-container")},i.a.createElement(L.a,{tabBarExtraContent:u,type:"card"},i.a.createElement(B,{tab:"\u756a\u8304\u7edf\u8ba1",key:"1"},i.a.createElement(F,{classPrefix:"statistics",dataList:t,currentDate:r})),i.a.createElement(B,{tab:"\u4efb\u52a1\u7edf\u8ba1",key:"2"},i.a.createElement(F,{classPrefix:"statistics",dataList:a,currentDate:r}))))}),R=(a(203),a(206)),W=(a(275),a(276),a(277),function(e){var t=e.item,a=e.updateMethod,n=Object(s.useState)(!0),c=Object(o.a)(n,2),r=c[0],l=c[1],u=Object(s.useState)(""),m=Object(o.a)(u,2),d=m[0],p=m[1];return i.a.createElement("li",{key:t.id,className:"".concat("history-item","_container")},i.a.createElement("div",null,function(e){var t=e.started_at,a=e.ended_at,n=e.created_at,c=e.updated_at,r=e.completed_at,o=e.deleted;return t&&a?"".concat(P()(t).format("HH:mm")," - ").concat(P()(a).format("HH:mm")):n&&r?"".concat(P()(n).format("HH:mm")," - ").concat(P()(r).format("HH:mm")):o?"".concat(P()(c).format("HH:mm")):"".concat(P()(n).format("HH:mm")," - ").concat(P()(c).format("HH:mm"))}(t)),i.a.createElement("div",{className:"".concat("history-item","_desc")},i.a.createElement(f.a,{value:d||t.description,disabled:r,onChange:function(e){return p(e.target.value)}}),t.manually_created&&i.a.createElement("span",{className:"".concat("history-item","_red-text")},"(\u8865)")),i.a.createElement("div",{className:"".concat("history-item","_btn"),onClick:function(){if(r)return l(!1);a(t.id,{description:d}),l(!0),p("")}},r?"\u4fee\u6539":"\u63d0\u4ea4"),!r&&i.a.createElement("div",{className:"".concat("history-item","_btn"),onClick:function(){l(!0)}},"\u53d6\u6d88"))}),z=(a(278),function(){return i.a.createElement("div",{className:"".concat("default-page","_container")},i.a.createElement("img",{src:y.a,alt:"\u65e0\u8bb0\u5f55",className:"".concat("default-page","_norecord")}),i.a.createElement("p",{className:"".concat("default-page","_norecord-tips")},"\u6682\u65e0\u8bb0\u5f55"))}),G=function(e){var t=e.list,a=e.updateMethod,n=e.type,c=Object(s.useState)({}),r=Object(o.a)(c,2),l=r[0],u=r[1];Object(s.useEffect)(function(){"finishedTomato"===n?u({visibleTotal:!0,unit:"\u756a\u8304",visibleTotalTime:!0}):"finishedTasks"===n&&u({visibleTotal:!0,unit:"\u4efb\u52a1",visibleTotalTime:!1})},[n]);return i.a.createElement("div",{className:"".concat("history","-container")},t.length&&t.map(function(e){return i.a.createElement("div",{key:e.date,className:"".concat("history","-content")},i.a.createElement("div",null,i.a.createElement("div",{className:"".concat("history","-date")},i.a.createElement("p",{className:"".concat("history","-text")},e.dateStr),i.a.createElement("p",{className:"".concat("history","-text")},(t=e.date,["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"][new Date(t).getDay()]))),l.visibleTotal&&i.a.createElement("p",{className:"".concat("history","-text")},"\u5171\u5b8c\u6210\u4e86",i.a.createElement("span",{className:"".concat("history","-strong_text")},e.subList.length),"\u4e2a",l.unit),l.visibleTotalTime&&i.a.createElement("p",{className:"".concat("history","-text")},"\u603b\u8ba1\xa0",function(e){var t,a,n=0;return e.forEach(function(e){var t=e.duration;n+=t||0}),t=(a=n/6e4)/60,"".concat(Math.floor(t)," \u5c0f\u65f6 ").concat(Math.floor(a%60)," \u5206\u949f")}(e.subList))),i.a.createElement("ul",{className:"".concat("history","-list")},e.subList.length&&e.subList.map(function(e){return i.a.createElement(W,{item:e,key:e.id,updateMethod:a})})));var t}),!t.length&&i.a.createElement(z,null))},X=L.a.TabPane,U=Object(l.b)(function(e){return{tomatoList:e.tomatos}},function(e){return{updateTomato:function(t){return e(E(t))},addTomato:function(t){return e(v(t))}}})(function(e){var t=e.tomatoList,a=e.updateTomato,n=e.addTomato,c=Object(s.useState)([]),r=Object(o.a)(c,2),l=r[0],u=r[1],m=Object(s.useState)([]),d=Object(o.a)(m,2),h=d[0],b=d[1],v=Object(s.useState)(0),E=Object(o.a)(v,2),g=E[0],k=E[1],j=Object(s.useState)(0),y=Object(o.a)(j,2),_=y[0],N=y[1],S=Object(s.useState)("finishedTomatos"),Y=Object(o.a)(S,2),x=Y[0],M=Y[1],D=Object(s.useState)(null),C=Object(o.a)(D,2),H=C[0],A=C[1],F=Object(s.useState)(null),I=Object(o.a)(F,2),K=I[0],q=I[1],B=Object(s.useState)(!1),J=Object(o.a)(B,2),W=J[0],z=J[1],U=Object(s.useState)(""),Q=Object(o.a)(U,2),V=Q[0],Z=Q[1],$=function(e,t){O.a.put("/tomatoes/".concat(e),t).then(function(e){a(e.data.resource)})},ee=function(){A(null),q(null),z(!1),Z("")};Object(s.useEffect)(function(){var e={},a={},n=function(e){var t={};return e.forEach(function(e){var a=P()(e.ended_at||e.created_at).format("YYYY/MM/DD");t[a]?t[a].subList.push(e):t[a]={date:a,dateStr:P()(a).format("YYYY\u5e74MM\u6708DD\u65e5"),subList:[e]}}),t},c=function(e){var t=Object.keys(e);return t.sort(function(e,t){return new Date(t).getTime()-new Date(e).getTime()}),t.map(function(t){return e[t]})};!function(){var c=[],r=[];t.forEach(function(e){e.ended_at&&c.push(e),e.aborted&&r.push(e)}),k(c.length),N(r.length),e=n(c),a=n(r)}(),u(c(e)),b(c(a))},[t]);var te="finishedTomatos"===x?i.a.createElement(p.a,{type:"plus-square",style:{fontSize:24,color:"#ffffff",cursor:"pointer"},onClick:function(){z(!0)}}):i.a.createElement("span",null);return i.a.createElement("div",{className:"".concat("tomatos-history","_container")},i.a.createElement(L.a,{type:"card",onChange:function(e){M(e)},tabBarExtraContent:te},i.a.createElement(X,{tab:"\u5b8c\u6210\u7684\u756a\u8304",key:"finishedTomatos"},i.a.createElement(G,{list:l,updateMethod:$,type:"finishedTomato"})),i.a.createElement(X,{tab:"\u6253\u65ad\u8bb0\u5f55",key:"abortedTomatos"},i.a.createElement(G,{list:h,updateMethod:$,type:"abortedTomata"}))),(g||_)&&i.a.createElement("p",{className:"".concat("tomatos-history","_total")},"\u603b\u8ba1\uff1a","finishedTomatos"===x?g:_,"\u4e2a\u756a\u8304"),i.a.createElement(T.a,{visible:W,title:"\u8865\u8bb0\u756a\u8304",onCancel:ee,onOk:function(){(H?K?V||(R.a.error("\u8bf7\u586b\u5199\u5173\u4e8e\u8865\u8bb0\u756a\u8304\u7684\u63cf\u8ff0"),0):(R.a.error("\u8bf7\u9009\u62e9\u7ed3\u675f\u65f6\u95f4"),0):(R.a.error("\u8bf7\u9009\u62e9\u5f00\u59cb\u65f6\u95f4"),0))&&O.a.post("/tomatoes",{started_at:new Date(H.valueOf()),ended_at:new Date(K.valueOf()),duration:K.valueOf()-H.valueOf(),description:V,manually_created:!0}).then(function(e){n([e.data.resource]),ee()})}},i.a.createElement("div",{className:"".concat("tomatos-history","_modal-item")},i.a.createElement("span",null,"\u5f00\u59cb\u65f6\u95f4\uff1a"),i.a.createElement(w.a,{disabledDate:function(e){return!(!e||!K)&&e.valueOf()>K.valueOf()},showTime:!0,format:"YYYY-MM-DD HH:mm:ss",value:H,placeholder:"\u5f00\u59cb\u65f6\u95f4",onChange:function(e){A(e)}})),i.a.createElement("div",{className:"".concat("tomatos-history","_modal-item")},i.a.createElement("span",null,"\u7ed3\u675f\u65f6\u95f4\uff1a"),i.a.createElement(w.a,{disabledDate:function(e){return!(!e||!H)&&e.valueOf()<=H.valueOf()},showTime:!0,format:"YYYY-MM-DD HH:mm:ss",value:K,placeholder:"\u7ed3\u675f\u65f6\u95f4",onChange:function(e){q(e)}})),i.a.createElement("div",{className:"".concat("tomatos-history","_modal-item")},i.a.createElement("span",null,"\u63cf\u8ff0\uff1a"),i.a.createElement(f.a,{value:V,type:"text",onChange:function(e){return Z(e.target.value)}}))))}),Q=(a(279),L.a.TabPane),V=Object(l.b)(function(e){return{taskList:e.tasks}},function(e){return{updateTask:function(t){return e(b(t))}}})(function(e){var t=e.taskList,a=e.updateTask,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],l=c[1],u=Object(s.useState)([]),m=Object(o.a)(u,2),d=m[0],f=m[1],p=Object(s.useState)(0),h=Object(o.a)(p,2),b=h[0],v=h[1],E=Object(s.useState)(0),g=Object(o.a)(E,2),k=g[0],j=g[1],y=Object(s.useState)("finishedTasks"),_=Object(o.a)(y,2),N=_[0],T=_[1];Object(s.useEffect)(function(){var e={},a={},n=function(e){var t={};return e.forEach(function(e){var a=P()(e.completed_at||e.updated_at).format("YYYY/MM/DD");t[a]?t[a].subList.push(e):t[a]={date:a,dateStr:P()(a).format("YYYY\u5e74MM\u6708DD\u65e5"),subList:[e]}}),t},c=function(e){var t=Object.keys(e);return t.sort(function(e,t){return new Date(t).getTime()-new Date(e).getTime()}),t.map(function(t){return e[t]})};!function(){var c=[],r=[];t.forEach(function(e){e.completed&&c.push(e),e.deleted&&r.push(e)}),v(c.length),j(r.length),e=n(c),a=n(r)}(),l(c(e)),f(c(a)),console.log(c(e),c(a))},[t]);var S=function(e,t){O.a.put("/todos/".concat(e),t).then(function(e){a(e.data.resource)})};return i.a.createElement("div",{className:"".concat("tasks-history","_container")},i.a.createElement(L.a,{type:"card",onChange:function(e){T(e)}},i.a.createElement(Q,{tab:"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1",key:"finishedTasks"},i.a.createElement(G,{list:r,updateMethod:S,type:"finishedTasks"})),i.a.createElement(Q,{tab:"\u5df2\u5220\u9664\u7684\u4efb\u52a1",key:"deletedTasks"},i.a.createElement(G,{list:d,updateMethod:S,type:""}))),(b||k)&&i.a.createElement("p",{className:"".concat("tasks-history","_total")},"\u603b\u8ba1\uff1a","finishedTasks"===N?b:k,"\u4e2a\u4efb\u52a1"))}),Z=a(172);t.default=Object(l.b)(null,function(e){return{initTasks:function(t){return e(function(e){return{type:h.c,taskList:e}}(t))},initTomatos:function(t){return e(function(e){return{type:h.d,tomatoList:e}}(t))}}})(function(e){var t=e.history,a=e.initTasks,n=e.initTomatos,l=Object(s.useState)(""),u=Object(o.a)(l,2),m=u[0],f=u[1],p=Object(s.useState)("home"),h=Object(o.a)(p,2),b=h[0],v=h[1];Object(s.useEffect)(function(){return function(){var e=Object(r.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([O.a.get("https://gp-server.hunger-valley.com/me"),O.a.get("https://gp-server.hunger-valley.com/todos"),O.a.get("https://gp-server.hunger-valley.com/tomatoes")]);case 3:t=e.sent,f(t[0].data.account),a(t[1].data.resources),n(t[2].data.resources),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}()(),function(){n([]),a([])}},[n,a]);return i.a.createElement("section",{className:"".concat("home","-container")},i.a.createElement(d,{username:m,navList:[{key:"home",title:"\u4e3b\u9875"},{key:"statistics",title:"\u7edf\u8ba1"},{key:"tomatosHistory",title:"\u756a\u8304\u5386\u53f2"},{key:"tasksHistory",title:"\u4efb\u52a1\u5386\u53f2"}],logOut:function(){localStorage.removeItem(Z.a),t.replace("/login")},currentPage:b,upDateCurrentPage:v}),i.a.createElement("main",{className:"".concat("home","-main"),"data-active":"home"===b},i.a.createElement("div",{className:"".concat("home","-main_box")},i.a.createElement(C,null)),i.a.createElement("div",{className:"".concat("home","-main_box")},i.a.createElement(N,null))),i.a.createElement("main",{className:"".concat("home","-main"),"data-active":"statistics"===b},i.a.createElement(J,null)),i.a.createElement("main",{className:"".concat("home","-main"),"data-active":"tomatosHistory"===b},i.a.createElement(U,null)),i.a.createElement("main",{className:"".concat("home","-main"),"data-active":"tasksHistory"===b},i.a.createElement(V,null)))})}}]);
//# sourceMappingURL=5.0b420125.chunk.js.map